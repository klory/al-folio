---
layout: post
title: Z Score / Ztest
description: 
date: 2022-07-28
comments: true
---

# Use case

Estimate how many [standard deviation](https://en.wikipedia.org/wiki/Standard_deviation) (std) the sample is from the **population** mean.

**population**: all/entire data.

Examples:

* Given mean and std of course score of the entire class, now estimate how good is John's course score.


# Limitations

* Know population mean
* Know populatino std
* Population has at least 30 samples (why?)

# How to do it

$$Z = \frac{\bar{x}-\mu}{\sigma/\sqrt{n}}$$

* $$\bar{x}$$: sample mean
* $$\mu$$: population mean
* $$\sigma$$: population std
* $$n$$: sample size
* $$z$$: z score.

Note $$\sigma/\sqrt{n}$$ is actually the std of the sample mean (not sample std, [why](https://math.stackexchange.com/a/857863/538623)). Z score has a standard normal distribution, and when n==1, this simplifies to:

$$Z = \frac{x-\mu}{\sigma}$$

Again, if we have 40 students taken the final, and course score mean is 75, std is 14, while John got 84, we can compute the z score as

$$z = \frac{84-75}{14} = 0.64$$

**Here 0.64 means John's score is 0.64*std higher (because 0.64 is positive) than the mean**.

But 0.64*std is not that intuitive to understand, better way is telling me that John is better than x% of students in the class, and this is where Z score table can help.

# Z score table

[Z score table](http://www.z-table.com/) uses z score as input and outputs  the percentage just as we want in the previous section (area under curve).

In the example above, by reading the z score table, we know John is better than 0.7389 (73.89%) students in the class (population).

![z-score-table](/assets/img/2022-07-28-z-score/z_score_table.jpg)

> Note we don't need to know the number of samples in the population in order to use z score table.

# Where does z score table come from?
The answer is it is from [Gaussian distribution](https://en.wikipedia.org/wiki/Normal_distribution). According to [Cental Limite Thereom](https://sphweb.bumc.bu.edu/otlt/mph-modules/bs/bs704_probability/BS704_Probability12.html#:~:text=The%20central%20limit%20theorem%20states,will%20be%20approximately%20normally%20distributed.), if the population is large enough (e.g., more than 30), roughly, the (mean of) course score will follow gaussian distribution, so basically, we are now treating the course score distribution kind of like a gaussian distribution.

$$\frac{1}{\sigma \sqrt{2\pi}} e^{-\frac{(x-\mu)^2}{2\sigma^2}}$$

And the CDF (cumulative density function) is:

$$\frac{1}{2}[1+erf(\frac{x-\mu}{\sigma\sqrt{2}})]$$

Because when we compute z score we already normalized our input (John's score), we can just use $\mu=0$ and $\mu=1$, the CDF becomes standard:

$$\frac{1}{2}[1+erf(\frac{x}{\sqrt{2}})]$$

Now if we set $x=0.64$, we get

$$\frac{1}{2}[1+erf(\frac{0.64}{\sqrt{2}})] = 0.7389$$

This matches the number in z score table.

# What if population std is UNKNOWN?

In reality, even a distribution is Gaussian like, often it's hard to know population std (population mean is usually not easier to acquire/guess, <span style="color: red;">why?</span>), in such cases (i.e., gaussian-like distribution, know population mean, UNKNOWN population std), we would refer to another distribution (student t distribution), which I'll leave it for the next post.

# References

* https://www.wallstreetmojo.com/z-score-formula/